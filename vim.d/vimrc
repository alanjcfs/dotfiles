set nocompatible

filetype off
syntax off



" Silence Python3 deprecation warning
if has('python3')
  silent! python3 1
endif


" Global Vim settings

let s:mainfile = '~/.files/vim.d/main.vim'
if filereadable(expand(s:mainfile))
  exec "source " . s:mainfile
endif



" NOTE: Added because `source vimrc` doesn't turn it back on

filetype plugin indent on
syntax enable



" Vim distribution-specific settings

if exists('$TMUX')
  set ttymouse=xterm2
endif

set autoindent backspace=indent,eol,start
set autoread
set background=dark " dark | light "
set complete-=i
set display+=lastline
set encoding=utf-8
set formatoptions+=j
if &history < 1000
  set history=1000
endif
set hlsearch incsearch
set langnoremap
set laststatus=2
set lazyredraw
set listchars-=eol:$
set nobackup
set nogdefault
set noshowmatch
set nrformats-=octal
set ruler
set sessionoptions-=options
set showcmd
set showmode
set synmaxcol=3000
if &tabpagemax < 50
  set tabpagemax=50
endif
set tags-=./tags tags^=./tags; tags+=.git/tags
set ttyfast
set viminfo^=!
set wildmenu wildignore+=*/tmp/* "" wildmode=list:longest,full
set wrap



" Global indentation characters



" Vim directories for backup, swap, and undo

set backupdir=~/.files/vim.d/tmp/backup//
set directory=~/.files/vim.d/tmp/swap//
set undodir=~/.files/vim.d/tmp/undo//

if !isdirectory(expand(&undodir))
  call mkdir(expand(&undodir), "p")
endif
if !isdirectory(expand(&backupdir))
  call mkdir(expand(&backupdir), "p")
endif
if !isdirectory(expand(&directory))
  call mkdir(expand(&directory), "p")
endif



" Quickly time out on keycodes, but never time out on mappings
" NOTE: Causes NeoVim to insert special characters when using the ESC key.

set notimeout ttimeout ttimeoutlen=200



" Convenient command to see the difference between the current buffer and the
" file it was loaded from, thus the changes you made.
" Only define it when not defined already.
if !exists(":DiffOrig")
  command DiffOrig vert new | set bt=nofile | r ++edit # | 0d_ | diffthis
      \ | wincmd p | diffthis endif
endif
