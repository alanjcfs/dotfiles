set nocompatible

filetype off
syntax off



let s:plugfile = '~/.files/vim.d/shared/plugs.vim'
if filereadable(expand(s:plugfile))
  exec "source " . s:plugfile
endif
" TODO: Install local or vim specific plugs



" NOTE: Added because source vimrc doesn't turn it back on
filetype plugin indent on
syntax enable



" Global Vim settings

let s:sharedfile = '~/.files/vim.d/shared/settings.vim'
if filereadable(expand(s:sharedfile))
  exec "source " . s:sharedfile
endif



" Neocomplete
let g:neocomplete#enable_at_startup = 1
inoremap <silent> <cr> <c-r>=<SID>popup_close_and_newline()<cr>
function! s:popup_close_and_newline() abort
  return neocomplete#close_popup() . "\<cr>"
endfunction



" Vim distribution-specific settings

if exists('$TMUX')
  set ttymouse=xterm2
endif

set autoindent backspace=indent,eol,start
set autoread
set background=dark " dark | light "
set clipboard^=unnamed,unnamedplus
set colorcolumn=80 cursorline
set complete-=i
set confirm
set display+=lastline
set encoding=utf-8
set formatoptions+=j
if &history < 1000
  set history=1000
endif
set hlsearch incsearch
set langnoremap
set laststatus=2
set lazyredraw
set list listchars+=tab:»·,trail:·,nbsp:+,extends:>,precedes:< listchars-=eol:$
set nogdefault
set noshowmatch
set nrformats-=octal
set number norelativenumber
set ruler
set sessionoptions-=options
set showcmd
set showmode
set synmaxcol=3000
if &tabpagemax < 50
  set tabpagemax=50
endif
set tags-=./tags tags^=./tags; tags+=.git/tags
set ttyfast
set viminfo^=!
set wildmenu wildignore+=*/tmp/* "" wildmode=list:longest,full
set wrap



" Global indentation characters
set expandtab noshiftround shiftwidth=2 smarttab softtabstop=2 tabstop=4



" Vim directories for backup, swap, and undo

set backupdir=~/.files/vim.d/tmp/backup//
set directory=~/.files/vim.d/tmp/swap//
set undodir=~/.files/vim.d/tmp/undo//

if !isdirectory(expand(&undodir))
  call mkdir(expand(&undodir), "p")
endif
if !isdirectory(expand(&backupdir))
  call mkdir(expand(&backupdir), "p")
endif
if !isdirectory(expand(&directory))
  call mkdir(expand(&directory), "p")
endif



" Quickly time out on keycodes, but never time out on mappings
" NOTE: Causes NeoVim to insert special characters when using the ESC key.
set notimeout ttimeout ttimeoutlen=200



if has("vms")
  set nobackup		" do not keep a backup file, use versions instead
else
  set backup		" keep a backup file
endif


""""""""""""""""""""""""""""""""""""""""""""""""""
" Grab bags
""""""""""""""""""""""""""""""""""""""""""""""""""



let s:autocmdfile = '~/.files/vim.d/shared/autocmds.vim'
if filereadable(expand(s:autocmdfile))
  exec "source " . s:autocmdfile
endif



" Convenient command to see the difference between the current buffer and the
" file it was loaded from, thus the changes you made.
" Only define it when not defined already.
if !exists(":DiffOrig")
  command DiffOrig vert new | set bt=nofile | r ++edit # | 0d_ | diffthis
      \ | wincmd p | diffthis endif
endif
